<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensores Móviles Android</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> -->
    <link rel="stylesheet" href="all.min.css"/>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            padding-bottom: 40px;
        }

        header {
            background: rgba(0, 0, 0, 0.7);
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border-bottom: 3px solid #0fce7c;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #0fce7c;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.15);
            border-left: 5px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }

        .warning-box i {
            color: #ffc107;
            font-size: 24px;
            margin-right: 15px;
        }

        .sensors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .sensor-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sensor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
        }

        .sensor-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sensor-icon {
            width: 60px;
            height: 60px;
            background: rgba(15, 206, 124, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 24px;
            color: #0fce7c;
        }

        .sensor-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .sensor-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .available {
            background: rgba(15, 206, 124, 0.2);
            color: #0fce7c;
        }

        .unavailable {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }

        .sensor-data {
            margin-top: 15px;
            font-size: 1rem;
            line-height: 1.6;
        }

        .sensor-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #0fce7c;
            margin: 10px 0;
        }

        .visualization {
            height: 150px;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .ball {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle at 30% 30%, #0fce7c, #0a8a5a);
            border-radius: 50%;
            position: absolute;
            box-shadow: 0 0 20px rgba(15, 206, 124, 0.5);
            transition: all 0.1s;
        }

        .compass {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .compass-needle {
            position: absolute;
            width: 4px;
            height: 50%;
            background: #dc3545;
            top: 0;
            left: 50%;
            transform-origin: bottom center;
            transform: translateX(-50%);
        }

        .light-visualization {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .buttons {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 15px;
        }

        button {
            padding: 12px 25px;
            background: #0fce7c;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            background: #0dbd70;
            transform: scale(1.05);
        }

        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .shake-detection {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #0fce7c;
        }

        .shaking {
            animation: shake 0.5s;
            animation-iteration-count: infinite;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .instructions {
            margin-top: 20px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .sensors-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-mobile-alt"></i> Sensores Móviles Android</h1>
        <p class="subtitle">Esta aplicación detecta y muestra en tiempo real los datos de los sensores disponibles en tu dispositivo móvil. Permite interactuar con acelerómetro, giroscopio, orientación, luz ambiental y detector de movimiento.</p>
    </header>

    <div class="container">
        <div class="warning-box">
            <i class="fas fa-exclamation-triangle"></i>
            <div>
                <strong>Importante:</strong> Para usar los sensores, necesitas acceder desde un dispositivo móvil Android y conceder los permisos necesarios. Algunos sensores pueden no estar disponibles en todos los dispositivos.
            </div>
        </div>

        <div class="buttons">
            <button id="startBtn">
                <i class="fas fa-play"></i> Iniciar Sensores
            </button>
            <button id="stopBtn" disabled>
                <i class="fas fa-stop"></i> Detener Sensores
            </button>
            <button id="calibrateBtn">
                <i class="fas fa-compass"></i> Calibrar Brújula
            </button>
        </div>

        <div class="sensors-grid">
            <!-- Acelerómetro -->
            <div class="sensor-card">
                <div class="sensor-header">
                    <div class="sensor-icon">
                        <i class="fas fa-running"></i>
                    </div>
                    <div>
                        <div class="sensor-title">Acelerómetro</div>
                        <div class="sensor-status available" id="accelerometerStatus">Disponible</div>
                    </div>
                </div>
                <div class="sensor-data">
                    <p>Mide la aceleración del dispositivo en tres ejes (X, Y, Z), incluyendo la gravedad.</p>
                    <div class="sensor-value" id="accelerometerData">Esperando datos...</div>
                    <div class="visualization">
                        <div class="ball" id="accelerationBall"></div>
                    </div>
                    <div class="instructions">
                        <i class="fas fa-info-circle"></i> Inclina o mueve tu dispositivo para ver cambios en la visualización.
                    </div>
                </div>
            </div>

            <!-- Giroscopio -->
            <div class="sensor-card">
                <div class="sensor-header">
                    <div class="sensor-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div>
                        <div class="sensor-title">Giroscopio</div>
                        <div class="sensor-status available" id="gyroscopeStatus">Disponible</div>
                    </div>
                </div>
                <div class="sensor-data">
                    <p>Mide la velocidad de rotación del dispositivo en tres ejes (alpha, beta, gamma).</p>
                    <div class="sensor-value" id="gyroscopeData">Esperando datos...</div>
                    <div class="visualization">
                        <div class="ball" id="gyroscopeBall"></div>
                    </div>
                    <div class="instructions">
                        <i class="fas fa-info-circle"></i> Gira tu dispositivo para ver cambios en la visualización.
                    </div>
                </div>
            </div>

            <!-- Orientación (Brújula) -->
            <div class="sensor-card">
                <div class="sensor-header">
                    <div class="sensor-icon">
                        <i class="fas fa-compass"></i>
                    </div>
                    <div>
                        <div class="sensor-title">Orientación</div>
                        <div class="sensor-status available" id="orientationStatus">Disponible</div>
                    </div>
                </div>
                <div class="sensor-data">
                    <p>Proporciona los ángulos de orientación del dispositivo (alpha, beta, gamma). Alpha es la brújula.</p>
                    <div class="sensor-value" id="orientationData">Esperando datos...</div>
                    <div class="visualization">
                        <div class="compass">
                            <div class="compass-needle" id="compassNeedle"></div>
                        </div>
                    </div>
                    <div class="instructions">
                        <i class="fas fa-info-circle"></i> Apunta tu dispositivo hacia el norte para calibrar la brújula.
                    </div>
                </div>
            </div>

            <!-- Sensor de Luz -->
            <div class="sensor-card">
                <div class="sensor-header">
                    <div class="sensor-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div>
                        <div class="sensor-title">Sensor de Luz</div>
                        <div class="sensor-status unavailable" id="lightStatus">No disponible</div>
                    </div>
                </div>
                <div class="sensor-data">
                    <p>Mide el nivel de luz ambiental en lux. Solo disponible en algunos dispositivos.</p>
                    <div class="sensor-value" id="lightData">No disponible</div>
                    <div class="visualization" id="lightVisualization">
                        <div class="light-visualization">
                            Luz ambiental
                        </div>
                    </div>
                    <div class="instructions">
                        <i class="fas fa-info-circle"></i> Cubre el sensor de luz con tu mano o apunta hacia una fuente de luz.
                    </div>
                </div>
            </div>

            <!-- Detector de Movimiento (Agitado) -->
            <div class="sensor-card">
                <div class="sensor-header">
                    <div class="sensor-icon">
                        <i class="fas fa-hand-rock"></i>
                    </div>
                    <div>
                        <div class="sensor-title">Detector de Agitado</div>
                        <div class="sensor-status available" id="shakeStatus">Activo</div>
                    </div>
                </div>
                <div class="sensor-data">
                    <p>Detecta cuando agitas el dispositivo. Utiliza el acelerómetro para determinar movimientos bruscos.</p>
                    <div class="sensor-value" id="shakeData">En espera...</div>
                    <div class="visualization">
                        <div class="shake-detection" id="shakeIcon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                    </div>
                    <div class="instructions">
                        <i class="fas fa-info-circle"></i> Agita tu dispositivo para activar la detección.
                    </div>
                </div>
            </div>

            <!-- Resumen de Sensores -->
            <div class="sensor-card">
                <div class="sensor-header">
                    <div class="sensor-icon">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <div>
                        <div class="sensor-title">Resumen de Sensores</div>
                        <div class="sensor-status available" id="summaryStatus">Actualizado</div>
                    </div>
                </div>
                <div class="sensor-data">
                    <p>Lista de sensores disponibles y sus capacidades en tu dispositivo:</p>
                    <ul id="sensorsList" style="margin-top: 15px; padding-left: 20px;">
                        <li>Cargando información de sensores...</li>
                    </ul>
                    <div class="instructions" style="margin-top: 15px;">
                        <i class="fas fa-info-circle"></i> Esta lista se actualiza automáticamente al iniciar los sensores.
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Aplicación de demostración de sensores móviles Android | Compatible con la mayoría de navegadores modernos</p>
            <p>Nota: Esta aplicación requiere acceso a sensores del dispositivo y puede no funcionar en algunos navegadores o dispositivos.</p>
        </footer>
    </div>

    <script>
        // Elementos del DOM
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const calibrateBtn = document.getElementById('calibrateBtn');
        
        // Elementos de datos
        const accelerometerData = document.getElementById('accelerometerData');
        const gyroscopeData = document.getElementById('gyroscopeData');
        const orientationData = document.getElementById('orientationData');
        const lightData = document.getElementById('lightData');
        const shakeData = document.getElementById('shakeData');
        const sensorsList = document.getElementById('sensorsList');
        
        // Elementos de visualización
        const accelerationBall = document.getElementById('accelerationBall');
        const gyroscopeBall = document.getElementById('gyroscopeBall');
        const compassNeedle = document.getElementById('compassNeedle');
        const lightVisualization = document.getElementById('lightVisualization');
        const shakeIcon = document.getElementById('shakeIcon');
        
        // Elementos de estado
        const accelerometerStatus = document.getElementById('accelerometerStatus');
        const gyroscopeStatus = document.getElementById('gyroscopeStatus');
        const orientationStatus = document.getElementById('orientationStatus');
        const lightStatus = document.getElementById('lightStatus');
        const shakeStatus = document.getElementById('shakeStatus');
        const summaryStatus = document.getElementById('summaryStatus');
        
        // Variables de estado
        let sensorsActive = false;
        let calibrationOffset = 0;
        let lastShakeTime = 0;
        let shakeCount = 0;
        let lightSensor = null;
        
        // Umbral para detectar agitado
        const SHAKE_THRESHOLD = 15;
        
        // Inicialización de la aplicación
        document.addEventListener('DOMContentLoaded', () => {
            checkSensorsAvailability();
            setupEventListeners();
        });
        
        // Verificar disponibilidad de sensores
        function checkSensorsAvailability() {
            // Verificar Acelerómetro
            if (window.DeviceMotionEvent) {
                accelerometerStatus.textContent = "Disponible";
                accelerometerStatus.className = "sensor-status available";
            } else {
                accelerometerStatus.textContent = "No disponible";
                accelerometerStatus.className = "sensor-status unavailable";
            }
            
            // Verificar Giroscopio
            if (window.DeviceOrientationEvent) {
                gyroscopeStatus.textContent = "Disponible";
                gyroscopeStatus.className = "sensor-status available";
            } else {
                gyroscopeStatus.textContent = "No disponible";
                gyroscopeStatus.className = "sensor-status unavailable";
            }
            
            // Verificar Sensor de Luz Ambiental
            if ('AmbientLightSensor' in window) {
                lightStatus.textContent = "Disponible";
                lightStatus.className = "sensor-status available";
                lightData.textContent = "Listo para medir";
            } else {
                lightStatus.textContent = "No disponible";
                lightStatus.className = "sensor-status unavailable";
                lightData.textContent = "No disponible en este dispositivo";
            }
            
            // Actualizar resumen
            updateSensorsSummary();
        }
        
        // Configurar event listeners
        function setupEventListeners() {
            startBtn.addEventListener('click', startSensors);
            stopBtn.addEventListener('click', stopSensors);
            calibrateBtn.addEventListener('click', calibrateCompass);
        }
        
        // Iniciar todos los sensores
        function startSensors() {
            if (sensorsActive) return;
            
            // Solicitar permiso para acceder a los sensores (necesario en iOS)
            if (typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            activateSensors();
                        } else {
                            alert('Se necesitan permisos para acceder a los sensores.');
                        }
                    })
                    .catch(console.error);
            } else {
                // En Android y otros navegadores
                activateSensors();
            }
        }
        
        // Activar sensores después de obtener permisos
        function activateSensors() {
            sensorsActive = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            
            // Acelerómetro
            window.addEventListener('devicemotion', handleAcceleration);
            
            // Orientación/Giroscopio
            window.addEventListener('deviceorientation', handleOrientation);
            
            // Sensor de luz ambiental (si está disponible)
            if ('AmbientLightSensor' in window) {
                try {
                    lightSensor = new AmbientLightSensor();
                    lightSensor.addEventListener('reading', () => {
                        handleLight(lightSensor.illuminance);
                    });
                    lightSensor.addEventListener('error', (event) => {
                        lightStatus.textContent = "Error";
                        lightStatus.className = "sensor-status unavailable";
                        lightData.textContent = "Error: " + event.error.message;
                    });
                    lightSensor.start();
                } catch (error) {
                    console.error('Error al iniciar el sensor de luz:', error);
                }
            }
            
            // Detector de agitado
            window.addEventListener('devicemotion', handleShake);
            
            // Actualizar estado
            updateSensorsSummary();
            summaryStatus.textContent = "Activo";
            
            // Mostrar mensaje
            showNotification("Sensores activados correctamente");
        }
        
        // Detener todos los sensores
        function stopSensors() {
            sensorsActive = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            
            // Remover event listeners
            window.removeEventListener('devicemotion', handleAcceleration);
            window.removeEventListener('deviceorientation', handleOrientation);
            window.removeEventListener('devicemotion', handleShake);
            
            // Detener sensor de luz
            if (lightSensor) {
                lightSensor.stop();
                lightSensor = null;
            }
            
            // Restablecer visualizaciones
            accelerationBall.style.transform = 'translate(-50%, -50%)';
            gyroscopeBall.style.transform = 'translate(-50%, -50%)';
            compassNeedle.style.transform = 'translateX(-50%) rotate(0deg)';
            shakeIcon.classList.remove('shaking');
            
            // Restablecer datos
            accelerometerData.textContent = 'Detenido';
            gyroscopeData.textContent = 'Detenido';
            orientationData.textContent = 'Detenido';
            shakeData.textContent = 'En espera...';
            
            // Actualizar estado
            summaryStatus.textContent = "Detenido";
            
            // Mostrar mensaje
            showNotification("Sensores detenidos");
        }
        
        // Manejar datos del acelerómetro
        function handleAcceleration(event) {
            const acceleration = event.accelerationIncludingGravity;
            if (!acceleration) return;
            
            const x = acceleration.x || 0;
            const y = acceleration.y || 0;
            const z = acceleration.z || 0;
            
            // Actualizar datos numéricos
            accelerometerData.textContent = `X: ${x.toFixed(2)} | Y: ${y.toFixed(2)} | Z: ${z.toFixed(2)}`;
            
            // Actualizar visualización
            const maxAcceleration = 20; // Valor máximo para normalizar
            const normalizedX = (x / maxAcceleration) * 50;
            const normalizedY = (y / maxAcceleration) * 50;
            
            // Limitar el movimiento dentro del área de visualización
            const posX = Math.max(-70, Math.min(70, normalizedX));
            const posY = Math.max(-70, Math.min(70, normalizedY));
            
            accelerationBall.style.transform = `translate(calc(-50% + ${posX}px), calc(-50% + ${posY}px))`;
        }
        
        // Manejar datos de orientación/giroscopio
        function handleOrientation(event) {
            const alpha = event.alpha || 0; // Brújula (0-360)
            const beta = event.beta || 0;   // Inclinación frontal (-180 a 180)
            const gamma = event.gamma || 0; // Inclinación lateral (-90 a 90)
            
            // Actualizar datos numéricos
            orientationData.textContent = `α: ${alpha.toFixed(1)}° | β: ${beta.toFixed(1)}° | γ: ${gamma.toFixed(1)}°`;
            
            // Actualizar brújula
            const compassAngle = (360 - alpha + calibrationOffset) % 360;
            compassNeedle.style.transform = `translateX(-50%) rotate(${compassAngle}deg)`;
            
            // Actualizar datos del giroscopio
            gyroscopeData.textContent = `α: ${alpha.toFixed(1)}°/s | β: ${beta.toFixed(1)}°/s | γ: ${gamma.toFixed(1)}°/s`;
            
            // Actualizar visualización del giroscopio
            const maxRotation = 180;
            const normalizedBeta = (beta / maxRotation) * 70;
            const normalizedGamma = (gamma / maxRotation) * 70;
            
            // Limitar el movimiento dentro del área de visualización
            const posX = Math.max(-70, Math.min(70, normalizedGamma));
            const posY = Math.max(-70, Math.min(70, normalizedBeta));
            
            gyroscopeBall.style.transform = `translate(calc(-50% + ${posX}px), calc(-50% + ${posY}px))`;
        }
        
        // Manejar datos del sensor de luz
        function handleLight(illuminance) {
            if (!illuminance) return;
            
            // Actualizar datos
            lightData.textContent = `${illuminance.toFixed(0)} lux`;
            
            // Actualizar visualización
            let brightness = 'Oscuro';
            let bgColor = '#111';
            let textColor = '#FFF';
            
            if (illuminance < 10) {
                brightness = 'Muy oscuro';
                bgColor = '#111';
            } else if (illuminance < 50) {
                brightness = 'Oscuro';
                bgColor = '#333';
            } else if (illuminance < 100) {
                brightness = 'Poca luz';
                bgColor = '#666';
            } else if (illuminance < 1000) {
                brightness = 'Bien iluminado';
                bgColor = '#999';
                textColor = '#000';
            } else if (illuminance < 10000) {
                brightness = 'Muy iluminado';
                bgColor = '#CCC';
                textColor = '#000';
            } else {
                brightness = 'Luz intensa';
                bgColor = '#FFF';
                textColor = '#000';
            }
            
            lightVisualization.style.backgroundColor = bgColor;
            lightVisualization.style.color = textColor;
            lightVisualization.innerHTML = `<div class="light-visualization">${brightness}<br>${illuminance.toFixed(0)} lux</div>`;
        }
        
        // Detectar agitado del dispositivo
        function handleShake(event) {
            const acceleration = event.accelerationIncludingGravity;
            if (!acceleration) return;
            
            const x = acceleration.x || 0;
            const y = acceleration.y || 0;
            const z = acceleration.z || 0;
            
            // Calcular la aceleración total
            const totalAcceleration = Math.sqrt(x*x + y*y + z*z);
            
            // Detectar agitado
            const currentTime = new Date().getTime();
            const timeDiff = currentTime - lastShakeTime;
            
            if (totalAcceleration > SHAKE_THRESHOLD && timeDiff > 1000) {
                lastShakeTime = currentTime;
                shakeCount++;
                
                // Actualizar datos
                shakeData.textContent = `¡Agitado! (${shakeCount} veces)`;
                
                // Animación
                shakeIcon.classList.add('shaking');
                setTimeout(() => {
                    shakeIcon.classList.remove('shaking');
                }, 500);
                
                // Mostrar notificación
                showNotification(`¡Dispositivo agitado! (${shakeCount})`);
            }
        }
        
        // Calibrar brújula (establecer norte actual)
        function calibrateCompass() {
            if (!sensorsActive) {
                showNotification("Primero activa los sensores");
                return;
            }
            
            // En una aplicación real, aquí se usaría la lectura actual como referencia
            // Para este ejemplo, simulamos una calibración
            calibrationOffset = Math.random() * 360;
            showNotification("Brújula calibrada. Norte establecido.");
            
            // Simular calibración
            calibrateBtn.disabled = true;
            calibrateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calibrando...';
            
            setTimeout(() => {
                calibrateBtn.disabled = false;
                calibrateBtn.innerHTML = '<i class="fas fa-compass"></i> Calibrar Brújula';
                showNotification("Calibración completada");
            }, 1500);
        }
        
        // Actualizar resumen de sensores disponibles
        function updateSensorsSummary() {
            const sensors = [];
            
            if (window.DeviceMotionEvent) {
                sensors.push("Acelerómetro (3 ejes con gravedad)");
            }
            
            if (window.DeviceOrientationEvent) {
                sensors.push("Giroscopio/Orientación (alpha, beta, gamma)");
            }
            
            if ('AmbientLightSensor' in window) {
                sensors.push("Sensor de Luz Ambiental (lux)");
            }
            
            if ('ProximitySensor' in window) {
                sensors.push("Sensor de Proximidad");
            }
            
            if ('Magnetometer' in window) {
                sensors.push("Magnetómetro (campo magnético)");
            }
            
            if ('LinearAccelerationSensor' in window) {
                sensors.push("Aceleración Lineal (sin gravedad)");
            }
            
            if ('GravitySensor' in window) {
                sensors.push("Sensor de Gravedad");
            }
            
            if (sensors.length === 0) {
                sensors.push("No se detectaron sensores compatibles");
            }
            
            // Actualizar lista
            sensorsList.innerHTML = '';
            sensors.forEach(sensor => {
                const li = document.createElement('li');
                li.textContent = sensor;
                li.style.marginBottom = '8px';
                sensorsList.appendChild(li);
            });
            
            // Actualizar contador
            summaryStatus.textContent = `${sensors.length} sensores`;
        }
        
        // Mostrar notificación temporal
        function showNotification(message) {
            // Crear elemento de notificación
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #0fce7c;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                font-weight: 600;
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            // Eliminar después de 3 segundos
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
            
            // Añadir estilos de animación si no existen
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // Información sobre los sensores disponibles
        console.log("Aplicación de sensores móviles cargada");
        console.log("Dispositivo soporta DeviceMotionEvent:", !!window.DeviceMotionEvent);
        console.log("Dispositivo soporta DeviceOrientationEvent:", !!window.DeviceOrientationEvent);
        console.log("Dispositivo soporta AmbientLightSensor:", 'AmbientLightSensor' in window);
    </script>
</body>
</html>